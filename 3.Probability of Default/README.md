# Homework3 征信建模数据分析

## 数据说明
`simudata.csv`：此数据为某公司用户在第三方交易平台的用户的日常刷卡行为数据，数据提供了一批用户行为记录，包括：年龄、银行卡数、借贷比率、交易笔数、所有行为均值、所有行为最大值等。详细的变量含义及说明如下：

![数据说明](https://jrothschild.oss-cn-shanghai.aliyuncs.com/FDU_Data_Mining/HW3/data_introduction.png)

在营销领域，RFM模型是用来衡量客户的价值和客户的创利能力的重要工具和手段。这个模型通过一个客户的近期购买行为、购买的总体频率以及花了多少钱三项指标来描述该客户的综合价值，具体如下：
1. R（Recency）：最近一次消费，指上一次购买的时间到现在的距离。理论上，上一次消费时间越近的用户应该是相对而言活跃的用户。
2. F（Frequency）：消费频率，即用户在限定的期间内产生购买的总次数。产生购买越频繁的用户，忠诚度越高。
3. M（Monetary）：某个用户所有消费金额的平均值。
4. S（StandardDeviation）：由于这三个指标并不能够衡量用户产生行为的波动性，所以我们增加一个指标S来衡量用户行为的波动性。

举例说明：对于购买游戏点卡类行为，我们可以定义R为用户最近一次购买游戏点卡距离数据提取时间的时间间隔，F定义为一年内用户购买游戏点卡的次数，M定义为一年内用户每次购买游戏点卡的平均金额，S定义为用户每次购买游戏点卡金额的标准差。我们将所有变量记作类别名称加指标简称的形式，例如游戏R，表示游戏类的Recency。

用户行为的分类通过银行卡信息表，以及商户分类信息表，根据业务场景，我们提取了以下类别，每个类别都对应着以上我们已经定义好的RFMS四个指标。类别包括：
1. 借记类：刻画用户使用储蓄卡的交易行为。不同的用户习惯不同，采用储蓄卡和信用卡的倾向也可能不同。
2. 消费类：刻画用户的日常消费行为。日常消费行为的金额以及频次不同，用户的还款能力可能不同。
3. 信贷类：刻画用户之前的小额贷款类行为。用户之前如果有其他消费贷款类行为可能已经习惯进行消费贷款，从而可能具备更良好的信用状况。
4. 转账类：刻画用户的转账行为。经常通过熊小贷APP转账的用户可能与不转账的用户行为不同。
5. 话费类：刻画用户的话费充值交易行为。话费充值是否规律与充值金额多少都可能意味着用户群体不同。
6. 公缴类：刻画用户交水，电，煤气费等交易行为。公缴费用的多少与是否规律也可能说明用户群体的不同。
7. 游戏类：刻画用户购买游戏点卡的行为。经常玩游戏的用户群体可能与不玩游戏的人不同。
8. 四大行卡类以及中型银行卡类：四大行包括中国银行，中国农业银行，中国工商银行，中国建设银行，中型银行包括招商银行，浦发银行，兴业银行，平安银行等。这个指标的设定有以下两方面原因：a.不同公司的工资卡不同，小型创业公司一般采用中型银行的银行卡；b.四大行的信用卡发放较为保守，所以能够申请到四大行信用卡的人可能和采用其他银行信用卡的用户群体不同。
9. 白金及金卡类：通过卡标首可以对应到银行卡是属于哪家银行的哪种类型的卡，例如招商银行的金葵花卡。我们搜索整理了相应银行的金卡和白金卡卡种名称，并对应到每一个用户。我们初步认为，拥有白金卡和金卡的用户具备更高的还款能力，所以用户群体不同。

## 分析任务
1. 读入数据并了解各个自变量的含义；
2. 对变量交易笔数和所有用户行为均值分别绘制违约组和非违约组的对比箱线图，并分析是否违约与这些变量之间的关系，给出解读；
3. 用全部样本数据，以是否违约为因变量建立逻辑回归模型，利用BIC准则进行变量筛选，观察最终得到的回归系数并尝试解释对系数进行解释；
4. 使用任务3的模型，对全部样本进行预测，计算AUC值，并绘制ROC曲线，对模型的效果进行评估；
5. 任务4中对每个训练样本预测出了非违约的概率，按照非违约率从高到低排序，将全部样本分为5组人群：非违约率最高的20%用户、…、非违约率最低的20%用户，计算五类人群的平均非违约概率，从高到低排序，绘制柱状图；对结果的商业应用进行解读。